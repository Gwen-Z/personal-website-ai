# 📱 iPhone快捷指令配置步骤（简化版）

## ✅ 后端API测试成功
- 服务器地址：`http://192.168.31.23:5101/api/record`
- 测试结果：✅ 正常工作

## 🎯 iPhone快捷指令配置步骤

### 步骤1：创建新快捷指令
1. 打开iPhone的"快捷指令"App
2. 点击右上角"+"
3. 命名为"每日数据记录"

### 步骤2：添加操作（按顺序）

#### 2.1 获取当前日期
- 搜索"获取当前日期"
- 格式选择"自定"
- 输入格式：`yyyy-MM-dd`

#### 2.2 输入心情分数
- 搜索"要求输入"
- 输入类型：数字
- 提示文本：`请输入心情分数(0-10)`

#### 2.3 输入生活分数
- 搜索"要求输入"
- 输入类型：数字
- 提示文本：`请输入生活分数(0-10)`

#### 2.4 输入学习分数
- 搜索"要求输入"
- 输入类型：数字
- 提示文本：`请输入学习分数(0-10)`

#### 2.5 输入工作分数
- 搜索"要求输入"
- 输入类型：数字
- 提示文本：`请输入工作分数(0-10)`

#### 2.6 输入灵感分数
- 搜索"要求输入"
- 输入类型：数字
- 提示文本：`请输入灵感分数(0-10)`

#### 2.7 输入备注（可选）
- 搜索"要求输入"
- 输入类型：文本
- 提示文本：`今天有什么想记录的吗？（可选）`
- 允许多行：开启

### 步骤3：构建JSON数据
- 搜索"获取字典的值"
- 点击"+"添加键值对：
  - `date`: 选择"当前日期"变量
  - `mood`: 选择第一个"已提供的输入"
  - `life`: 选择第二个"已提供的输入"
  - `study`: 选择第三个"已提供的输入"
  - `work`: 选择第四个"已提供的输入"
  - `inspiration`: 选择第五个"已提供的输入"
  - `note`: 选择第六个"已提供的输入"

### 步骤4：发送HTTP请求
- 搜索"获取URL内容"
- URL：`http://192.168.31.23:5101/api/record`
- 方法：POST
- 请求体：选择上一步的"字典"
- 头部：添加 `Content-Type: application/json`

### 步骤5：显示结果
- 搜索"显示通知"
- 标题：`数据上传`
- 正文：`✅ 今日数据记录成功！`

## 🔧 重要配置细节

### URL设置
- **WiFi内网**：`http://192.168.31.23:5101/api/record`
- **确保iPhone和电脑在同一WiFi网络**

### 请求头设置
在"获取URL内容"操作中：
1. 点击"显示更多"
2. 点击"头部"
3. 添加：
   - 键：`Content-Type`
   - 值：`application/json`

### 数据类型注意
- 所有分数必须是数字类型
- 日期格式必须是 `YYYY-MM-DD`
- 备注是文本类型

## 📋 测试数据示例

成功的数据格式：
```json
{
  "date": "2025-01-15",
  "mood": 8.5,
  "life": 7.2,
  "study": 9.0,
  "work": 6.8,
  "inspiration": 8.3,
  "note": "今天学习了新技术"
}
```

## 🚨 故障排除

### 常见问题：
1. **无法连接**
   - 检查iPhone和电脑是否在同一WiFi
   - 确认电脑IP地址：`http://192.168.31.23:5101`
   - 确保后端服务正在运行

2. **数据格式错误**
   - 分数必须是数字，不能是文本
   - 确保所有必需字段都有值

3. **网络权限**
   - 在iPhone设置中允许快捷指令访问网络

## 🎯 高级功能（可选）

### 添加错误处理
在"获取URL内容"后添加：
- 搜索"如果"
- 条件：URL内容 包含 "success"
- 成功时显示：`✅ 数据上传成功`
- 失败时显示：`❌ 上传失败，请重试`

### 添加默认值
可以为每个输入设置默认值，比如：
- 心情分数默认：7
- 生活分数默认：7
- 等等...

## 📱 使用方法

1. 运行快捷指令
2. 依次输入各项分数
3. 输入今日备注（可跳过）
4. 等待上传完成通知

## 🔄 自动化选项

### 定时提醒
- 在快捷指令中添加到"自动化"
- 设置每日固定时间运行
- 比如每晚21:00自动提醒记录

### Siri语音
- 为快捷指令录制Siri短语
- 比如："记录今日数据"
- 就可以语音启动记录

## 📊 验证数据

上传成功后，可以：
1. 打开网页：`http://localhost:3000`
2. 点击"数据" → "原始数据"
3. 查看刚才上传的记录
